(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2191],{"./packages/superset-ui-core/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AnnotationOpacity:()=>AnnotationOpacity,AnnotationSourceType:()=>AnnotationSourceType,AnnotationStyle:()=>AnnotationStyle,AnnotationType:()=>AnnotationType,ApiLegacy:()=>legacy_namespaceObject,ApiV1:()=>v1_namespaceObject,AppSection:()=>Base.Tr,AxisType:()=>Base.we,BRAND_COLOR:()=>BRAND_COLOR,Behavior:()=>Base.cg,CategoricalAirbnb:()=>airbnb,CategoricalColorNamespace:()=>CategoricalColorNamespace_namespaceObject,CategoricalColorScale:()=>color_CategoricalColorScale,CategoricalD3:()=>d3.Z,CategoricalEcharts:()=>echarts,CategoricalGoogle:()=>google,CategoricalLyft:()=>lyft,CategoricalPreset:()=>preset,CategoricalScheme:()=>CategoricalScheme.Z,CategoricalSuperset:()=>superset,ChartClient:()=>ChartClient,ChartDataProvider:()=>components_ChartDataProvider,ChartFrame:()=>ChartFrame,ChartLabel:()=>Base.Df,ChartMetadata:()=>ChartMetadata.Z,ChartPlugin:()=>ChartPlugin.Z,ChartProps:()=>ChartProps.Z,ChartPropsConfig:()=>ChartProps.ChartPropsConfig,ColorScheme:()=>ColorScheme.Z,ColorSchemeRegistry:()=>ColorSchemeRegistry.Z,ComparisonType:()=>AdvancedAnalytics.wj,ContributionType:()=>Query.YC,CtasEnum:()=>Query.WN,CurrencyFormatter:()=>CurrencyFormatter.Z,DEFAULT_D3_FORMAT:()=>D3FormatConfig.A,DEFAULT_METRICS:()=>Datasource.BH,DTTM_ALIAS:()=>constants.W3,DataMaskType:()=>Dashboard.gT,DatasourceKey:()=>DatasourceKey.Z,DatasourceType:()=>Datasource.i9,EXTRA_FORM_DATA_APPEND_KEYS:()=>constants.Ci,EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS:()=>constants.fn,EXTRA_FORM_DATA_OVERRIDE_KEYS:()=>constants.Ay,EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS:()=>constants.NU,EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS:()=>constants.gn,EmotionCacheProvider:()=>style.zo,ErrorTypeEnum:()=>Query.C5,ExtensibleFunction:()=>ExtensibleFunction.Z,FAST_DEBOUNCE:()=>components_constants.o,FeatureFlag:()=>featureFlags.TT,GenericDataType:()=>QueryResponse.Z,LOCAL_PREFIX:()=>TimeFormats.D,NO_TIME_RANGE:()=>constants.vM,NativeFilterType:()=>Dashboard.BE,NumberFormats:()=>NumberFormats.Z,NumberFormatter:()=>NumberFormatter.Z,NumberFormatterRegistry:()=>NumberFormatterRegistry.Z,OverwritePolicy:()=>Registry.r,PREVIEW_TIME:()=>TimeFormatter.F,PREVIEW_VALUE:()=>NumberFormatter.G,PandasAxis:()=>PandasAxis,Plugin:()=>Plugin.Z,Preset:()=>Preset,QueryMode:()=>QueryFormData.n,QueryState:()=>Query.Tb,Registry:()=>Registry.Z,RegistryWithDefaultKey:()=>RegistryWithDefaultKey.Z,RollingType:()=>AdvancedAnalytics.su,SLOW_DEBOUNCE:()=>components_constants.M,SafeMarkdown:()=>SafeMarkdown.Z,SequentialCommon:()=>common,SequentialD3:()=>sequential_d3.Z,SequentialScheme:()=>SequentialScheme.Z,SharedLabelColor:()=>SharedLabelColor,SharedLabelColorSource:()=>SharedLabelColorSource,SuperChart:()=>SuperChart.Z,SupersetApiError:()=>v1_types.P,SupersetApiErrorType:()=>v1_types.M,SupersetClient:()=>SupersetClient.Z,SupersetClientClass:()=>SupersetClientClass.Z,ThemeProvider:()=>style.f6,TimeFormats:()=>TimeFormats.default,TimeFormatter:()=>TimeFormatter.Z,TimeGranularity:()=>time_format_types.A,TooltipFrame:()=>tooltip_TooltipFrame,TooltipTable:()=>TooltipTable,TypedRegistry:()=>models_TypedRegistry,WithLegend:()=>legend_WithLegend,__hack_reexport_AdvancedAnalytics:()=>AdvancedAnalytics.ZP,__hack_reexport_Column:()=>Column.ZP,__hack_reexport_Dashboard:()=>Dashboard.ZP,__hack_reexport_Datasource:()=>Datasource.ZP,__hack_reexport_Metric:()=>Metric.ZP,__hack_reexport_Query:()=>Query.ZP,__hack_reexport_QueryFormData:()=>QueryFormData.Z,__hack_reexport_QueryResponse:()=>QueryResponse.C,__hack_reexport_Time:()=>Time,__hack_reexport_chart_Base:()=>Base.ZP,__hack_reexport_chart_QueryResponse:()=>types_QueryResponse,__hack_reexport_chart_TransformFunction:()=>TransformFunction,__hack_reexport_connection:()=>connection_types,__hack_reexport_dimension:()=>dimension_types,__hack_reexport_jed:()=>jed,__hack_reexport_translation:()=>translation_types,addAlpha:()=>utils.Zf,addLocaleData:()=>TranslatorSingleton.oK,addTranslation:()=>TranslatorSingleton.Zt,addTranslations:()=>TranslatorSingleton.hk,buildCustomFormatters:()=>buildCustomFormatters,buildQueryContext:()=>buildQueryContext.Z,buildQueryObject:()=>buildQueryObject.Z,callApi:()=>callApiAndParseWithTimeout.Z,chartLabelExplanations:()=>Base.t$,chartLabelWeight:()=>Base.eH,computeMaxFontSize:()=>computeMaxFontSize,concludedQueryStateList:()=>Query.yv,configure:()=>TranslatorSingleton.jQ,convertFilter:()=>convertFilter.Z,convertKeysToCamelCase:()=>convertKeysToCamelCase.Z,createD3NumberFormatter:()=>createD3NumberFormatter.Z,createD3TimeFormatter:()=>createD3TimeFormatter.Z,createDurationFormatter:()=>createDurationFormatter,createEmotionCache:()=>style.S9,createLoadableRenderer:()=>createLoadableRenderer.Z,createMultiFormatter:()=>createMultiFormatter.Z,createSiAtMostNDigitFormatter:()=>createSiAtMostNDigitFormatter,createSmartNumberFormatter:()=>createSmartNumberFormatter.Z,css:()=>style.iv,defineSharedModule:()=>defineSharedModule,defineSharedModules:()=>defineSharedModules,denormalizeTimestamp:()=>denormalizeTimestamp_normalizeTimestamp,emotionCache:()=>style.Yi,ensureIsArray:()=>ensureIsArray.Z,ensureIsInt:()=>ensureIsInt.Z,evalExpression:()=>math_expression.f,extractQueryFields:()=>extractQueryFields.Z,extractTimegrain:()=>extractTimegrain,finestTemporalGrainFormatter:()=>finestTemporalGrain.Z,formatNumber:()=>NumberFormatterRegistrySingleton.uf,formatTime:()=>TimeFormatterRegistrySingleton.mr,formatTimeRange:()=>TimeFormatterRegistrySingleton.ns,getAnalogousColors:()=>utils.Gh,getCategoricalSchemeRegistry:()=>CategoricalSchemeRegistrySingleton.Z,getChartBuildQueryRegistry:()=>ChartBuildQueryRegistrySingleton.Z,getChartComponentRegistry:()=>ChartComponentRegistrySingleton.Z,getChartControlPanelRegistry:()=>ChartControlPanelRegistrySingleton.Z,getChartMetadataRegistry:()=>ChartMetadataRegistrySingleton.Z,getChartTransformPropsRegistry:()=>ChartTransformPropsRegistrySingleton.Z,getColumnLabel:()=>getColumnLabel.Z,getContrastingColor:()=>utils.Qg,getCurrencySymbol:()=>CurrencyFormatter.j,getCustomFormatter:()=>getCustomFormatter,getExtensionsRegistry:()=>getExtensionsRegistry,getMetricLabel:()=>getMetricLabel.Z,getMultipleTextDimensions:()=>getMultipleTextDimensions.Z,getNumberFormatter:()=>NumberFormatterRegistrySingleton.JB,getNumberFormatterRegistry:()=>NumberFormatterRegistrySingleton.ZP,getSelectedText:()=>getSelectedText,getSequentialSchemeRegistry:()=>SequentialSchemeRegistrySingleton.Z,getSharedLabelColor:()=>SharedLabelColorSingleton,getTextDimension:()=>getTextDimension,getTimeFormatter:()=>TimeFormatterRegistrySingleton.bt,getTimeFormatterForGranularity:()=>TimeFormatterRegistrySingleton.uh,getTimeFormatterRegistry:()=>TimeFormatterRegistrySingleton.ZP,getTimeRangeFormatter:()=>TimeFormatterRegistrySingleton.Rg,getValueFormatter:()=>getValueFormatter,getXAxisColumn:()=>getXAxis.Bw,getXAxisLabel:()=>getXAxis.M8,hasGenericChartAxes:()=>getXAxis.O6,hexToRgb:()=>utils.oo,initFeatureFlags:()=>featureFlags.fG,isAdhocColumn:()=>Column.GA,isAdhocMetricSQL:()=>Metric.q5,isAdhocMetricSimple:()=>Metric.nX,isBinaryAdhocFilter:()=>Filter.kC,isBinaryOperator:()=>Operator.VU,isDefined:()=>isDefined.Z,isEqualArray:()=>isEqualArray.Z,isEventAnnotationLayer:()=>isEventAnnotationLayer,isFeatureEnabled:()=>featureFlags.cr,isFilterDivider:()=>Dashboard.nY,isFormulaAnnotationLayer:()=>isFormulaAnnotationLayer,isFreeFormAdhocFilter:()=>Filter.jz,isIntervalAnnotationLayer:()=>isIntervalAnnotationLayer,isNativeFilter:()=>Dashboard.kI,isNativeFilterWithDataMask:()=>Dashboard.S0,isPhysicalColumn:()=>Column.s9,isPostProcessingAggregation:()=>isPostProcessingAggregation,isPostProcessingBoxplot:()=>isPostProcessingBoxplot,isPostProcessingCompare:()=>isPostProcessingCompare,isPostProcessingContribution:()=>isPostProcessingContribution,isPostProcessingCum:()=>isPostProcessingCum,isPostProcessingDiff:()=>isPostProcessingDiff,isPostProcessingPivot:()=>isPostProcessingPivot,isPostProcessingProphet:()=>isPostProcessingProphet,isPostProcessingResample:()=>isPostProcessingResample,isPostProcessingRolling:()=>isPostProcessingRolling,isPostProcessingSort:()=>isPostProcessingSort,isProbablyHTML:()=>html.Kv,isQueryFormColumn:()=>Column.Gk,isQueryFormMetric:()=>Metric.I0,isRecordAnnotationResult:()=>isRecordAnnotationResult,isRequired:()=>isRequired.Z,isSavedMetric:()=>Metric.AG,isSetAdhocFilter:()=>Filter.VK,isSetOperator:()=>Operator.XA,isSimpleAdhocFilter:()=>Filter.Ki,isTableAnnotationLayer:()=>isTableAnnotationLayer,isTimeseriesAnnotationLayer:()=>isTimeseriesAnnotationLayer,isTimeseriesAnnotationResult:()=>isTimeseriesAnnotationResult,isUnaryAdhocFilter:()=>Filter._l,isUnaryOperator:()=>Operator.CW,isValidExpression:()=>math_expression.$,isXAxisSet:()=>getXAxis.SR,jsx:()=>style.tZ,keyframes:()=>style.F4,legacyValidateInteger:()=>legacyValidateInteger.Z,legacyValidateNumber:()=>legacyValidateNumber.Z,logging:()=>logging.Z,lruCache:()=>lruCache,makeApi:()=>makeApi.Z,makeSingleton:()=>makeSingleton.Z,mergeMargin:()=>mergeMargin,normalizeOrderBy:()=>normalizeOrderBy,normalizeTimeColumn:()=>normalizeTimeColumn.T,normalizeTimestamp:()=>normalizeTimestamp.Z,parseLength:()=>parseLength.Z,promiseTimeout:()=>promiseTimeout,reactify:()=>reactify,removeDuplicates:()=>removeDuplicates.Z,removeHTMLTags:()=>html.ZU,reset:()=>shared_modules_reset,resetTranslation:()=>TranslatorSingleton.sq,rgbToHex:()=>utils.vq,runningQueryStateList:()=>Query.sn,safeHtmlSpan:()=>html.Ul,sanitizeHtml:()=>html.Z6,sanitizeHtmlIfNeeded:()=>html.T4,seed:()=>seed,seedRandom:()=>seedRandom,setD3Format:()=>NumberFormatterRegistrySingleton.KF,smartDateDetailedFormatter:()=>smartDateDetailed,smartDateFormatter:()=>smartDate.Z,smartDateVerboseFormatter:()=>smartDateVerbose,styled:()=>style.iK,supersetTheme:()=>style.K6,t:()=>TranslatorSingleton.t,testQuery:()=>Query.Qn,testQueryResponse:()=>Query.pY,testQueryResults:()=>Query.eh,tn:()=>TranslatorSingleton.tn,truncationCSS:()=>useCSSTextTruncation.B,typedMemo:()=>typedMemo,useCSSTextTruncation:()=>useCSSTextTruncation.Z,useChangeEffect:()=>useChangeEffect,useComponentDidMount:()=>useComponentDidMount,useComponentDidUpdate:()=>useComponentDidUpdate,useElementOnScreen:()=>useElementOnScreen,usePrevious:()=>usePrevious.D,useTheme:()=>style.Fg,useTruncation:()=>useTruncation_useChildElementTruncation,validateInteger:()=>validateInteger,validateMapboxStylesUrl:()=>validateMapboxStylesUrl,validateMaxValue:()=>validateMaxValue.Z,validateNonEmpty:()=>validateNonEmpty.Z,validateNumber:()=>validateNumber.Z,withTheme:()=>style.Zz});var legacy_namespaceObject={};__webpack_require__.r(legacy_namespaceObject),__webpack_require__.d(legacy_namespaceObject,{__hack_reexport_query_api_legacy:()=>legacy_types,getDatasourceMetadata:()=>getDatasourceMetadata,getFormData:()=>getFormData});var v1_namespaceObject={};__webpack_require__.r(v1_namespaceObject),__webpack_require__.d(v1_namespaceObject,{default:()=>v1,getChartData:()=>getChartData});var CategoricalColorNamespace_namespaceObject={};__webpack_require__.r(CategoricalColorNamespace_namespaceObject),__webpack_require__.d(CategoricalColorNamespace_namespaceObject,{DEFAULT_NAMESPACE:()=>DEFAULT_NAMESPACE,default:()=>CategoricalColorNamespace,getColor:()=>getColor,getNamespace:()=>getNamespace,getScale:()=>getScale});var ExtensibleFunction=__webpack_require__("./packages/superset-ui-core/src/models/ExtensibleFunction.ts"),Plugin=__webpack_require__("./packages/superset-ui-core/src/models/Plugin.ts");class Preset{constructor(config){void 0===config&&(config={}),this.name=void 0,this.description=void 0,this.presets=void 0,this.plugins=void 0;const{name="",description="",presets=[],plugins=[]}=config;this.name=name,this.description=description,this.presets=presets,this.plugins=plugins}register(){return this.presets.forEach((preset=>{preset.register()})),this.plugins.forEach((plugin=>{plugin.register()})),this}}var Registry=__webpack_require__("./packages/superset-ui-core/src/models/Registry.ts"),RegistryWithDefaultKey=__webpack_require__("./packages/superset-ui-core/src/models/RegistryWithDefaultKey.ts");const models_TypedRegistry=class TypedRegistry{constructor(initialRecords){this.name="TypedRegistry",this.records=void 0,this.records=initialRecords}get(key){return this.records[key]}set(key,value){this.records[key]=value}};var convertKeysToCamelCase=__webpack_require__("./packages/superset-ui-core/src/utils/convertKeysToCamelCase.ts"),ensureIsArray=__webpack_require__("./packages/superset-ui-core/src/utils/ensureIsArray.ts"),ensureIsInt=__webpack_require__("./packages/superset-ui-core/src/utils/ensureIsInt.ts"),isDefined=__webpack_require__("./packages/superset-ui-core/src/utils/isDefined.ts"),isRequired=__webpack_require__("./packages/superset-ui-core/src/utils/isRequired.ts"),isEqualArray=__webpack_require__("./packages/superset-ui-core/src/utils/isEqualArray.ts"),makeSingleton=__webpack_require__("./packages/superset-ui-core/src/utils/makeSingleton.ts");function promiseTimeout(func,delay){return new Promise((resolve=>{setTimeout((()=>{resolve(func())}),delay)}))}var logging=__webpack_require__("./packages/superset-ui-core/src/utils/logging.ts"),removeDuplicates=__webpack_require__("./packages/superset-ui-core/src/utils/removeDuplicates.ts");class LRUCache{constructor(capacity){if(this.cache=void 0,this.capacity=void 0,capacity<1)throw new Error("The capacity in LRU must be greater than 0.");this.capacity=capacity,this.cache=new Map}has(key){return this.cache.has(key)}get(key){if("string"!=typeof key)throw new TypeError("The LRUCache key must be string.");if(this.cache.has(key)){const tmp=this.cache.get(key);return this.cache.delete(key),this.cache.set(key,tmp),tmp}}set(key,value){if("string"!=typeof key)throw new TypeError("The LRUCache key must be string.");this.cache.size>=this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(key,value)}clear(){this.cache.clear()}get size(){return this.cache.size}}function lruCache(capacity){return void 0===capacity&&(capacity=100),new LRUCache(capacity)}const getSelectedText=()=>{var _window$getSelection;return null==(_window$getSelection=window.getSelection())?void 0:_window$getSelection.toString()};var featureFlags=__webpack_require__("./packages/superset-ui-core/src/utils/featureFlags.ts"),seedrandom=__webpack_require__("./node_modules/seedrandom/index.js"),seedrandom_default=__webpack_require__.n(seedrandom);function seed(seed){return seedrandom_default()(seed)}function seedRandom(){return seedrandom_default()("superset-ui")()}var react=__webpack_require__("./node_modules/react/index.js");const typedMemo=react.memo;var PandasAxis,html=__webpack_require__("./packages/superset-ui-core/src/utils/html.tsx"),Datasource=__webpack_require__("./packages/superset-ui-core/src/query/types/Datasource.ts"),Column=__webpack_require__("./packages/superset-ui-core/src/query/types/Column.ts"),Filter=__webpack_require__("./packages/superset-ui-core/src/query/types/Filter.ts"),Metric=__webpack_require__("./packages/superset-ui-core/src/query/types/Metric.ts"),Operator=__webpack_require__("./packages/superset-ui-core/src/query/types/Operator.ts"),Query=__webpack_require__("./packages/superset-ui-core/src/query/types/Query.ts"),QueryFormData=__webpack_require__("./packages/superset-ui-core/src/query/types/QueryFormData.ts"),QueryResponse=__webpack_require__("./packages/superset-ui-core/src/query/types/QueryResponse.ts"),AdvancedAnalytics=__webpack_require__("./packages/superset-ui-core/src/query/types/AdvancedAnalytics.ts");function isPostProcessingAggregation(rule){return"aggregation"===(null==rule?void 0:rule.operation)}function isPostProcessingBoxplot(rule){return"boxplot"===(null==rule?void 0:rule.operation)}function isPostProcessingContribution(rule){return"contribution"===(null==rule?void 0:rule.operation)}function isPostProcessingPivot(rule){return"pivot"===(null==rule?void 0:rule.operation)}function isPostProcessingProphet(rule){return"prophet"===(null==rule?void 0:rule.operation)}function isPostProcessingDiff(rule){return"diff"===(null==rule?void 0:rule.operation)}function isPostProcessingRolling(rule){return"rolling"===(null==rule?void 0:rule.operation)}function isPostProcessingCum(rule){return"cum"===(null==rule?void 0:rule.operation)}function isPostProcessingCompare(rule){return"compare"===(null==rule?void 0:rule.operation)}function isPostProcessingSort(rule){return"sort"===(null==rule?void 0:rule.operation)}function isPostProcessingResample(rule){return"resample"===(null==rule?void 0:rule.operation)}!function(PandasAxis){PandasAxis[PandasAxis.Row=0]="Row",PandasAxis[PandasAxis.Column=1]="Column"}(PandasAxis||(PandasAxis={}));var Dashboard=__webpack_require__("./packages/superset-ui-core/src/query/types/Dashboard.ts");const Time={};var TranslatorSingleton=__webpack_require__("./packages/superset-ui-core/src/translation/TranslatorSingleton.ts");const jed={},translation_types={};var callApiAndParseWithTimeout=__webpack_require__("./packages/superset-ui-core/src/connection/callApi/callApiAndParseWithTimeout.ts"),SupersetClient=__webpack_require__("./packages/superset-ui-core/src/connection/SupersetClient.ts"),SupersetClientClass=__webpack_require__("./packages/superset-ui-core/src/connection/SupersetClientClass.ts");const connection_types={},modulePromises={},withNamespace=name=>`__superset__/${name}`;async function defineSharedModule(name,fetchModule){const moduleKey=withNamespace(name);if(!window[moduleKey]&&!modulePromises[name]){const modulePromise=fetchModule();modulePromises[name]=modulePromise,window[moduleKey]=await modulePromise}return modulePromises[name]}async function defineSharedModules(moduleMap){return Promise.all(Object.entries(moduleMap).map((_ref=>{let[name,fetchModule]=_ref;return defineSharedModule(name,fetchModule)})))}function shared_modules_reset(){Object.keys(modulePromises).forEach((key=>{delete window[withNamespace(key)],delete modulePromises[key]}))}function getFormData(_ref){let{client=SupersetClient.Z,sliceId,overrideFormData,requestConfig}=_ref;const promise=client.get({endpoint:`/api/v1/form_data/?slice_id=${sliceId}`,...requestConfig}).then((_ref2=>{let{json}=_ref2;return json}));return overrideFormData?promise.then((formData=>({...formData,...overrideFormData}))):promise}function getDatasourceMetadata(_ref){let{client=SupersetClient.Z,datasourceKey,requestConfig}=_ref;return client.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${datasourceKey}`,...requestConfig}).then((response=>response.json))}const legacy_types={};var makeApi=__webpack_require__("./packages/superset-ui-core/src/query/api/v1/makeApi.ts");const getChartData=(0,makeApi.Z)({method:"POST",endpoint:"/api/v1/chart/data"}),v1={getChartData};var constants=__webpack_require__("./packages/superset-ui-core/src/query/constants.ts"),buildQueryContext=__webpack_require__("./packages/superset-ui-core/src/query/buildQueryContext.ts"),buildQueryObject=__webpack_require__("./packages/superset-ui-core/src/query/buildQueryObject.ts"),convertFilter=__webpack_require__("./packages/superset-ui-core/src/query/convertFilter.ts");function extractTimegrain(formData){const{time_grain_sqla,extra_filters,extra_form_data}=formData;if(null!=extra_form_data&&extra_form_data.time_grain_sqla)return extra_form_data.time_grain_sqla;const extra_grain=(extra_filters||[]).filter((filter=>"__time_grain"===filter.col));return extra_grain.length?extra_grain[0].val:time_grain_sqla}var getColumnLabel=__webpack_require__("./packages/superset-ui-core/src/query/getColumnLabel.ts"),getMetricLabel=__webpack_require__("./packages/superset-ui-core/src/query/getMetricLabel.ts"),DatasourceKey=__webpack_require__("./packages/superset-ui-core/src/query/DatasourceKey.ts"),isEmpty=__webpack_require__("./node_modules/lodash/isEmpty.js"),isEmpty_default=__webpack_require__.n(isEmpty),isBoolean=__webpack_require__("./node_modules/lodash/isBoolean.js"),isBoolean_default=__webpack_require__.n(isBoolean);function normalizeOrderBy(queryObject){if(Array.isArray(queryObject.orderby)&&queryObject.orderby.length>0){const orderbyClause=queryObject.orderby[0];if(Array.isArray(orderbyClause)&&2===orderbyClause.length&&!isEmpty_default()(orderbyClause[0])&&isBoolean_default()(orderbyClause[1]))return queryObject}const cloneQueryObject={...queryObject};delete cloneQueryObject.series_limit_metric,delete cloneQueryObject.legacy_order_by,delete cloneQueryObject.order_desc,delete cloneQueryObject.orderby;const isAsc=!queryObject.order_desc;return void 0===queryObject.series_limit_metric||null===queryObject.series_limit_metric||isEmpty_default()(queryObject.series_limit_metric)?void 0===queryObject.legacy_order_by||null===queryObject.legacy_order_by||isEmpty_default()(queryObject.legacy_order_by)?Array.isArray(queryObject.metrics)&&queryObject.metrics.length>0?{...cloneQueryObject,orderby:[[queryObject.metrics[0],isAsc]]}:cloneQueryObject:{...cloneQueryObject,orderby:[[queryObject.legacy_order_by,isAsc]]}:{...cloneQueryObject,orderby:[[queryObject.series_limit_metric,isAsc]]}}var AnnotationType,AnnotationSourceType,AnnotationOpacity,AnnotationStyle,normalizeTimeColumn=__webpack_require__("./packages/superset-ui-core/src/query/normalizeTimeColumn.ts"),extractQueryFields=__webpack_require__("./packages/superset-ui-core/src/query/extractQueryFields.ts"),getXAxis=__webpack_require__("./packages/superset-ui-core/src/query/getXAxis.ts");function isFormulaAnnotationLayer(layer){return layer.annotationType===AnnotationType.Formula}function isEventAnnotationLayer(layer){return layer.annotationType===AnnotationType.Event}function isIntervalAnnotationLayer(layer){return layer.annotationType===AnnotationType.Interval}function isTimeseriesAnnotationLayer(layer){return layer.annotationType===AnnotationType.Timeseries}function isTableAnnotationLayer(layer){return layer.sourceType===AnnotationSourceType.Table}function isTimeseriesAnnotationResult(result){return Array.isArray(result)}function isRecordAnnotationResult(result){return Array.isArray(null==result?void 0:result.records)}!function(AnnotationType){AnnotationType.Event="EVENT",AnnotationType.Formula="FORMULA",AnnotationType.Interval="INTERVAL",AnnotationType.Timeseries="TIME_SERIES"}(AnnotationType||(AnnotationType={})),function(AnnotationSourceType){AnnotationSourceType.Line="line",AnnotationSourceType.Native="NATIVE",AnnotationSourceType.Table="table",AnnotationSourceType.Undefined=""}(AnnotationSourceType||(AnnotationSourceType={})),function(AnnotationOpacity){AnnotationOpacity.High="opacityHigh",AnnotationOpacity.Low="opacityLow",AnnotationOpacity.Medium="opacityMedium",AnnotationOpacity.Undefined=""}(AnnotationOpacity||(AnnotationOpacity={})),function(AnnotationStyle){AnnotationStyle.Dashed="dashed",AnnotationStyle.Dotted="dotted",AnnotationStyle.Solid="solid",AnnotationStyle.LongDashed="longDashed"}(AnnotationStyle||(AnnotationStyle={}));var v1_types=__webpack_require__("./packages/superset-ui-core/src/query/api/v1/types.ts"),NumberFormats=__webpack_require__("./packages/superset-ui-core/src/number-format/NumberFormats.ts"),NumberFormatter=__webpack_require__("./packages/superset-ui-core/src/number-format/NumberFormatter.ts"),D3FormatConfig=__webpack_require__("./packages/superset-ui-core/src/number-format/D3FormatConfig.ts"),NumberFormatterRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts"),NumberFormatterRegistry=__webpack_require__("./packages/superset-ui-core/src/number-format/NumberFormatterRegistry.ts"),createD3NumberFormatter=__webpack_require__("./packages/superset-ui-core/src/number-format/factories/createD3NumberFormatter.ts"),pretty_ms=__webpack_require__("./node_modules/pretty-ms/index.js"),pretty_ms_default=__webpack_require__.n(pretty_ms);function createDurationFormatter(config){void 0===config&&(config={});const{description,id,label,multiplier=1,...prettyMsOptions}=config;return new NumberFormatter.Z({description,formatFunc:value=>pretty_ms_default()(value*multiplier,prettyMsOptions),id:null!=id?id:"duration_format",label:null!=label?label:"Duration formatter"})}var src=__webpack_require__("./node_modules/d3-format/src/index.js");function createSiAtMostNDigitFormatter(config){void 0===config&&(config={});const{description,n=3,id,label}=config,siFormatter=(0,src.WU)(`.${n}s`);return new NumberFormatter.Z({description,formatFunc:value=>{const si=siFormatter(value);return si.slice(-1)<"A"?parseFloat(si).toString():si},id:null!=id?id:`si_at_most_${n}_digit`,label:null!=label?label:`SI with at most ${n} significant digits`})}var createSmartNumberFormatter=__webpack_require__("./packages/superset-ui-core/src/number-format/factories/createSmartNumberFormatter.ts"),TimeFormats=__webpack_require__("./packages/superset-ui-core/src/time-format/TimeFormats.ts"),TimeFormatter=__webpack_require__("./packages/superset-ui-core/src/time-format/TimeFormatter.ts"),TimeFormatterRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/time-format/TimeFormatterRegistrySingleton.ts"),createD3TimeFormatter=__webpack_require__("./packages/superset-ui-core/src/time-format/factories/createD3TimeFormatter.ts"),createMultiFormatter=__webpack_require__("./packages/superset-ui-core/src/time-format/factories/createMultiFormatter.ts"),smartDate=__webpack_require__("./packages/superset-ui-core/src/time-format/formatters/smartDate.ts");const smartDateDetailed=(0,createMultiFormatter.Z)({id:"smart_date_detailed",label:"Detailed adaptive formatter",formats:{millisecond:"%Y-%m-%d %H:%M:%S.%L",second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:%M",day:"%Y-%m-%d",week:"%Y-%m-%d",month:"%Y-%m-%d",year:"%Y"}}),smartDateVerbose=(0,createMultiFormatter.Z)({id:"smart_date_verbose",label:"Verbose Adaptative Formatting",formats:{millisecond:".%L",second:"%a %b %d, %I:%M:%S %p",minute:"%a %b %d, %I:%M %p",hour:"%a %b %d, %I %p",day:"%a %b %-e",week:"%a %b %-e",month:"%b %Y",year:"%Y"}});var finestTemporalGrain=__webpack_require__("./packages/superset-ui-core/src/time-format/formatters/finestTemporalGrain.ts"),normalizeTimestamp=__webpack_require__("./packages/superset-ui-core/src/time-format/utils/normalizeTimestamp.ts");function denormalizeTimestamp_normalizeTimestamp(value){const match=value.match(normalizeTimestamp.t);return match?`${match[1]}T${match[2]}`:value}var time_format_types=__webpack_require__("./packages/superset-ui-core/src/time-format/types.ts"),updateTextNode=__webpack_require__("./packages/superset-ui-core/src/dimension/svg/updateTextNode.ts"),getBBoxCeil=__webpack_require__("./packages/superset-ui-core/src/dimension/svg/getBBoxCeil.ts"),factories=__webpack_require__("./packages/superset-ui-core/src/dimension/svg/factories.ts");function getTextDimension(input,defaultDimension){const{text,className,style,container}=input;if(0===text.length)return{height:0,width:0};const svgNode=factories.Y.createInContainer(container),textNode=factories.S.createInContainer(svgNode);(0,updateTextNode.Z)(textNode,{className,style,text});const dimension=(0,getBBoxCeil.Z)(textNode,defaultDimension);return setTimeout((()=>{factories.S.removeFromContainer(svgNode),factories.Y.removeFromContainer(container)}),500),dimension}var getMultipleTextDimensions=__webpack_require__("./packages/superset-ui-core/src/dimension/getMultipleTextDimensions.ts");function decreaseSizeUntil(startSize,computeDimension,condition){let size=startSize,dimension=computeDimension(size);for(;!condition(dimension);){if(size-=1,size<0){size=startSize;break}dimension=computeDimension(size)}return size}function computeMaxFontSize(input){const{idealFontSize,maxWidth,maxHeight,style,...rest}=input;let size;if(null!=idealFontSize)size=idealFontSize;else{if(null==maxHeight)throw new Error("You must specify at least one of maxHeight or idealFontSize");size=Math.floor(maxHeight)}function computeDimension(fontSize){return getTextDimension({...rest,style:{...style,fontSize:`${fontSize}px`}})}return null!=maxWidth&&(size=decreaseSizeUntil(size,computeDimension,(dim=>dim.width>0&&dim.width<=maxWidth))),null!=maxHeight&&(size=decreaseSizeUntil(size,computeDimension,(dim=>dim.height>0&&dim.height<=maxHeight))),size}function mergeOneSide(operation,a,b){return void 0===a&&(a=0),void 0===b&&(b=0),Number.isNaN(a)||null===a?b:Number.isNaN(b)||null===b?a:operation(a,b)}function mergeMargin(margin1,margin2,mode){void 0===margin1&&(margin1={}),void 0===margin2&&(margin2={}),void 0===mode&&(mode="expand");const{top,left,bottom,right}=margin1,operation="expand"===mode?Math.max:Math.min;return{bottom:mergeOneSide(operation,bottom,margin2.bottom),left:mergeOneSide(operation,left,margin2.left),right:mergeOneSide(operation,right,margin2.right),top:mergeOneSide(operation,top,margin2.top)}}var parseLength=__webpack_require__("./packages/superset-ui-core/src/dimension/parseLength.ts");const dimension_types={};var SharedLabelColorSource,ordinal=__webpack_require__("./packages/superset-ui-core/node_modules/d3-scale/src/ordinal.js");function stringifyAndTrim(value){return String(value).trim()}!function(SharedLabelColorSource){SharedLabelColorSource[SharedLabelColorSource.dashboard=0]="dashboard",SharedLabelColorSource[SharedLabelColorSource.explore=1]="explore"}(SharedLabelColorSource||(SharedLabelColorSource={}));class SharedLabelColor{constructor(){this.sliceLabelMap=void 0,this.colorMap=void 0,this.source=void 0,this.sliceLabelMap=new Map,this.colorMap=new Map,this.source=SharedLabelColorSource.dashboard}updateColorMap(colorNamespace,colorScheme){const categoricalNamespace=getNamespace(colorNamespace),newColorMap=new Map;this.colorMap.clear(),this.sliceLabelMap.forEach((labels=>{const colorScale=categoricalNamespace.getScale(colorScheme);labels.forEach((label=>{const newColor=colorScale(label);newColorMap.set(label,newColor)}))})),this.colorMap=newColorMap}getColorMap(){return this.colorMap}addSlice(label,color,sliceId){if(this.source!==SharedLabelColorSource.dashboard||void 0===sliceId)return;const labels=this.sliceLabelMap.get(sliceId)||[];labels.includes(label)||(labels.push(label),this.sliceLabelMap.set(sliceId,labels)),this.colorMap.set(label,color)}removeSlice(sliceId){if(this.source!==SharedLabelColorSource.dashboard)return;this.sliceLabelMap.delete(sliceId);const newColorMap=new Map;this.sliceLabelMap.forEach((labels=>{labels.forEach((label=>{newColorMap.set(label,this.colorMap.get(label))}))})),this.colorMap=newColorMap}reset(){new Map(this.colorMap).forEach(((_,label)=>{this.colorMap.set(label,"")}))}clear(){this.sliceLabelMap.clear(),this.colorMap.clear()}}const SharedLabelColorSingleton=(0,makeSingleton.Z)(SharedLabelColor);var utils=__webpack_require__("./packages/superset-ui-core/src/color/utils.ts");class CategoricalColorScale extends ExtensibleFunction.Z{constructor(colors,parentForcedColors){void 0===parentForcedColors&&(parentForcedColors={}),super(((value,sliceId)=>this.getColor(value,sliceId))),this.originColors=void 0,this.colors=void 0,this.scale=void 0,this.parentForcedColors=void 0,this.forcedColors=void 0,this.multiple=void 0,this.originColors=colors,this.colors=colors,this.scale=(0,ordinal.Z)(),this.scale.range(colors),Object.entries(parentForcedColors).forEach((_ref=>{let[key,value]=_ref;"number"==typeof value&&(parentForcedColors[key]=colors[value%colors.length])})),this.parentForcedColors=parentForcedColors,this.forcedColors={},this.multiple=0}removeSharedLabelColorFromRange(sharedColorMap,cleanedValue){const updatedRange=new Set(this.originColors);sharedColorMap.forEach(((value,key)=>{key!==cleanedValue&&updatedRange.delete(value)})),Object.entries(this.parentForcedColors).forEach((_ref2=>{let[key,value]=_ref2;key!==cleanedValue&&updatedRange.delete(value)})),this.range(updatedRange.size>0?[...updatedRange]:this.originColors)}getColor(value,sliceId){var _this$parentForcedCol,_this$forcedColors;const cleanedValue=stringifyAndTrim(value),sharedLabelColor=SharedLabelColorSingleton(),sharedColorMap=sharedLabelColor.getColorMap(),sharedColor=sharedColorMap.get(cleanedValue);let color=(null==(_this$parentForcedCol=this.parentForcedColors)?void 0:_this$parentForcedCol[cleanedValue])||(null==(_this$forcedColors=this.forcedColors)?void 0:_this$forcedColors[cleanedValue])||sharedColor;if((0,featureFlags.cr)(featureFlags.TT.USE_ANALAGOUS_COLORS)){const multiple=Math.floor(this.domain().length/this.originColors.length);if(multiple>this.multiple){this.multiple=multiple;const newRange=(0,utils.Gh)(this.originColors,multiple);this.range(this.originColors.concat(newRange))}}const newColor=this.scale(cleanedValue);return color||(color=newColor,(0,featureFlags.cr)(featureFlags.TT.AVOID_COLORS_COLLISION)&&(this.removeSharedLabelColorFromRange(sharedColorMap,cleanedValue),color=this.scale(cleanedValue))),sharedLabelColor.addSlice(cleanedValue,color,sliceId),color}setColor(value,forcedColor){return this.forcedColors[stringifyAndTrim(value)]=forcedColor,this}getColorMap(){const colorMap={};return this.scale.domain().forEach((value=>{colorMap[value.toString()]=this.scale(value)})),{...colorMap,...this.forcedColors,...this.parentForcedColors}}copy(){const copy=new CategoricalColorScale(this.scale.range(),this.parentForcedColors);return copy.forcedColors={...this.forcedColors},copy.domain(this.domain()),copy.unknown(this.unknown()),copy}domain(newDomain){return void 0===newDomain?this.scale.domain():(this.scale.domain(newDomain),this)}range(newRange){return void 0===newRange?this.scale.range():(this.colors=newRange,this.scale.range(newRange),this)}unknown(value){return void 0===value?this.scale.unknown():(this.scale.unknown(value),this)}}const color_CategoricalColorScale=CategoricalColorScale;var CategoricalSchemeRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/color/CategoricalSchemeRegistrySingleton.ts");class CategoricalColorNamespace{constructor(name){this.name=void 0,this.forcedItems=void 0,this.scales=void 0,this.name=name,this.scales={},this.forcedItems={}}getScale(schemeId){var _ref,_scheme$colors;const id=null!=(_ref=null!=schemeId?schemeId:(0,CategoricalSchemeRegistrySingleton.Z)().getDefaultKey())?_ref:"",scheme=(0,CategoricalSchemeRegistrySingleton.Z)().get(id);return new color_CategoricalColorScale(null!=(_scheme$colors=null==scheme?void 0:scheme.colors)?_scheme$colors:[],this.forcedItems)}setColor(value,forcedColor){return this.forcedItems[stringifyAndTrim(value)]=forcedColor,this}resetColors(){this.forcedItems={}}}const namespaces={},DEFAULT_NAMESPACE="GLOBAL";function getNamespace(name){void 0===name&&(name=DEFAULT_NAMESPACE);const instance=namespaces[name];if(instance)return instance;const newInstance=new CategoricalColorNamespace(name);return namespaces[name]=newInstance,newInstance}function getColor(value,schemeId,namespace){return getNamespace(namespace).getScale(schemeId).getColor(value)}function getScale(scheme,namespace){return getNamespace(namespace).getScale(scheme)}var CategoricalScheme=__webpack_require__("./packages/superset-ui-core/src/color/CategoricalScheme.ts"),ColorScheme=__webpack_require__("./packages/superset-ui-core/src/color/ColorScheme.ts"),SequentialSchemeRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/color/SequentialSchemeRegistrySingleton.ts"),SequentialScheme=__webpack_require__("./packages/superset-ui-core/src/color/SequentialScheme.ts"),ColorSchemeRegistry=__webpack_require__("./packages/superset-ui-core/src/color/ColorSchemeRegistry.ts");const airbnb=[{id:"bnbColors",label:"Airbnb Colors",colors:["#29696B","#5BCACE","#F4B02A","#F1826A","#792EB2","#C96EC6","#921E50","#B27700","#9C3498","#9C3498","#E4679D","#C32F0E","#9D63CA"]}].map((s=>new CategoricalScheme.Z(s)));var d3=__webpack_require__("./packages/superset-ui-core/src/color/colorSchemes/categorical/d3.ts");const echarts=[{id:"echarts4Colors",label:"ECharts v4.x Colors",colors:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{id:"echarts5Colors",label:"ECharts v5.x Colors",colors:["#5470C6","#91CC75","#FAC858","#EE6666","#73C0DE","#3BA272","#FC8452","#9A60B4","#EA7CCC"]}].map((s=>new CategoricalScheme.Z(s))),google=[{id:"googleCategory10c",label:"Google Category 10c",colors:["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395"]},{id:"googleCategory20c",label:"Google Category 20c",colors:["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"]}].map((s=>new CategoricalScheme.Z(s))),lyft=[{id:"lyftColors",label:"Lyft Colors",colors:["#EA0B8C","#6C838E","#29ABE2","#33D9C1","#9DACB9","#7560AA","#2D5584","#831C4A","#333D47","#AC2077"]}].map((s=>new CategoricalScheme.Z(s))),preset=[{id:"presetColors",label:"Preset Colors",colors:["#6BD3B3","#FCC550","#408184","#66CBE2","#EE5960","#484E5A","#FF874E","#03748E","#C9BBAB","#B17BAA","#B5E9D9","#FDE2A7","#9FC0C1","#B2E5F0","#F6ACAF","#A4A6AC","#FFC3A6","#81B9C6","#E4DDD5","#D9BDD5"]}].map((s=>new CategoricalScheme.Z(s))),superset=[{id:"supersetColors",label:"Superset Colors",colors:["#1FA8C9","#454E7C","#5AC189","#FF7F44","#666666","#E04355","#FCC700","#A868B7","#3CCCCB","#A38F79","#8FD3E4","#A1A6BD","#ACE1C4","#FEC0A1","#B2B2B2","#EFA1AA","#FDE380","#D3B3DA","#9EE5E5","#D1C6BC"]}].map((s=>new CategoricalScheme.Z(s))),common=[{id:"blue_white_yellow",label:"blue/white/yellow",colors:["#00d1c1","white","#ffb400"]},{id:"fire",colors:["white","yellow","red","black"]},{id:"white_black",label:"white/black",colors:["white","black"]},{id:"black_white",label:"black/white",colors:["black","white"]},{id:"dark_blue",label:"dark blues",colors:["#EBF5F8","#6BB1CC","#357E9B","#1B4150","#092935"]},{id:"pink_grey",label:"pink/grey",isDiverging:!0,colors:["#E70B81","#FAFAFA","#666666"]},{id:"greens",colors:["#ffffcc","#78c679","#006837"]},{id:"purples",colors:["#f2f0f7","#9e9ac8","#54278f"]},{id:"oranges",colors:["#fef0d9","#fc8d59","#b30000"]},{id:"red_yellow_blue",label:"red/yellow/blue",isDiverging:!0,colors:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"]},{id:"brown_white_green",label:"brown/white/green",isDiverging:!0,colors:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"]},{id:"purple_white_green",label:"purple/white/green",isDiverging:!0,colors:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"]},{id:"superset_seq_1",label:"Superset Sequential #1",isDiverging:!1,colors:["#F4FAD4","#D7F1AC","#A9E3AF","#82CDBB","#63C1BF","#1FA8C9","#2367AC","#2A2D84","#251354","#050415"]},{id:"superset_seq_2",label:"Superset Sequential #2",isDiverging:!1,colors:["#FBF1B4","#FDD093","#FEAD71","#FF7F44","#E04355","#C53D6F","#952B7B","#4F167B","#251354","#050415"]},{id:"superset_div_1",label:"Superset Diverging #1",isDiverging:!1,colors:["#E04355","#E87180","#EFA1AA","#F7D0D4","#F6F6F7","#C8E9F1","#8FD3E4","#58BDD7","#1FA8C9"]},{id:"superset_div_2",label:"Superset Diverging #2",isDiverging:!1,colors:["#FF7F44","#FF9E72","#FEC0A1","#FFDFD0","#F6F6F7","#C8E9F1","#8FD3E4","#58BDD7","#1FA8C9"]},{id:"preset_seq_1",label:"Preset Sequential #1",isDiverging:!1,colors:["#F3FAEB","#DEF2D7","#CAEAC4","#98DEBC","#69D3B5","#4AA59D","#287886","#0D5B6A","#03273F","#03273F"]},{id:"preset_seq_2",label:"Preset Sequential #2",isDiverging:!1,colors:["#FEECE8","#FDE2DA","#FCCEC2","#F998AA","#F76896","#D13186","#AC0378","#790071","#43026C","#050415"]},{id:"preset_div_1",label:"Preset Diverging #1",isDiverging:!1,colors:["#B17BAA","#C59DC0","#D9BDD5","#D9BDD5","#F6F6F7","#CBEFE5","#98DECA","#64D0B0","#32BE96"]},{id:"preset_div_2",label:"Preset Diverging #2",isDiverging:!1,colors:["#CB5171","#D87C94","#E5A8B7","#F2D3DB","#F6F6F7","#CEE8EC","#9CD1D8","#6CBAC6","#3AA3B2"]},{id:"echarts_gradient",label:"ECharts gradient",isDiverging:!1,colors:["#f6EFA6","#D88273","#BF444C"]},{id:"deck_gl_heatmap_gradient",label:"Deck.gl Heatmap Default",colors:["#bd0026","#f03b20","#fd8d3c","#feb24c","#fed976","#ffffb2"]}].map((s=>new SequentialScheme.Z(s)));var sequential_d3=__webpack_require__("./packages/superset-ui-core/src/color/colorSchemes/sequential/d3.ts");const BRAND_COLOR="#00A699";var style=__webpack_require__("./packages/superset-ui-core/src/style/index.tsx"),legacyValidateInteger=__webpack_require__("./packages/superset-ui-core/src/validator/legacyValidateInteger.ts"),legacyValidateNumber=__webpack_require__("./packages/superset-ui-core/src/validator/legacyValidateNumber.ts");function validateInteger(v){return!("string"==typeof v&&v.trim().length>0&&Number.isInteger(Number(v.trim()))||"number"==typeof v&&Number.isInteger(v))&&(0,TranslatorSingleton.t)("is expected to be an integer")}var validateNumber=__webpack_require__("./packages/superset-ui-core/src/validator/validateNumber.ts"),validateNonEmpty=__webpack_require__("./packages/superset-ui-core/src/validator/validateNonEmpty.ts"),validateMaxValue=__webpack_require__("./packages/superset-ui-core/src/validator/validateMaxValue.ts");function validateMapboxStylesUrl(v){return!("string"==typeof v&&v.trim().length>0&&v.trim().startsWith("mapbox://styles/"))&&(0,TranslatorSingleton.t)("is expected to be a Mapbox URL")}var ChartBuildQueryRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/chart/registries/ChartBuildQueryRegistrySingleton.ts"),ChartMetadataRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/chart/registries/ChartMetadataRegistrySingleton.ts");class ChartClient{constructor(config){void 0===config&&(config={}),this.client=void 0;const{client=SupersetClient.Z}=config;this.client=client}loadFormData(input,options){if("sliceId"in input){return this.client.get({endpoint:`/api/v1/form_data/?slice_id=${input.sliceId}`,...options}).then((response=>response.json)).then((dbFormData=>({...dbFormData,...input.formData})))}return input.formData?Promise.resolve(input.formData):Promise.reject(new Error("At least one of sliceId or formData must be specified"))}async loadQueryData(formData,options){const{viz_type:visType}=formData,metaDataRegistry=(0,ChartMetadataRegistrySingleton.Z)(),buildQueryRegistry=(0,ChartBuildQueryRegistrySingleton.Z)();if(metaDataRegistry.has(visType)){var _await$buildQueryRegi;const{useLegacyApi}=metaDataRegistry.get(visType),buildQuery=null!=(_await$buildQueryRegi=await buildQueryRegistry.get(visType))?_await$buildQueryRegi:()=>formData,requestConfig=useLegacyApi?{endpoint:"/superset/explore_json/",postPayload:{form_data:buildQuery(formData)},...options}:{endpoint:"/api/v1/chart/data",jsonPayload:{query_context:buildQuery(formData)},...options};return this.client.post(requestConfig).then((response=>Array.isArray(response.json)?response.json:[response.json]))}return Promise.reject(new Error(`Unknown chart type: ${visType}`))}loadDatasource(datasourceKey,options){return this.client.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${datasourceKey}`,...options}).then((response=>response.json))}loadAnnotation(annotationLayer){return(0,isDefined.Z)(annotationLayer.sourceType)?Promise.reject(new Error("This feature is not implemented yet.")):Promise.resolve({})}loadAnnotations(annotationLayers){return Array.isArray(annotationLayers)&&annotationLayers.length>0?Promise.all(annotationLayers.map((layer=>this.loadAnnotation(layer)))).then((results=>annotationLayers.reduce(((prev,layer,i)=>{const output=prev;return output[layer.name]=results[i],output}),{}))):Promise.resolve({})}loadChartData(input){return this.loadFormData(input).then((formData=>Promise.all([this.loadAnnotations(formData.annotation_layers),this.loadDatasource(formData.datasource),this.loadQueryData(formData)]).then((_ref=>{let[annotationData,datasource,queriesData]=_ref;return{annotationData,datasource,formData,queriesData}}))))}}var ChartMetadata=__webpack_require__("./packages/superset-ui-core/src/chart/models/ChartMetadata.ts"),ChartPlugin=__webpack_require__("./packages/superset-ui-core/src/chart/models/ChartPlugin.ts"),ChartProps=__webpack_require__("./packages/superset-ui-core/src/chart/models/ChartProps.ts"),createLoadableRenderer=__webpack_require__("./packages/superset-ui-core/src/chart/components/createLoadableRenderer.ts"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js");function reactify(renderFn,callbacks){class ReactifiedComponent extends react.Component{constructor(props){super(props),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=callbacks&&callbacks.componentWillUnmount&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(ref){this.container=ref}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id,className}=this.props;return(0,emotion_react_browser_esm.tZ)("div",{ref:this.setContainerRef,id,className})}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes={...ReactifiedClass.propTypes,...renderFn.propTypes}),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}var SuperChart=__webpack_require__("./packages/superset-ui-core/src/chart/components/SuperChart.tsx"),ChartComponentRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/chart/registries/ChartComponentRegistrySingleton.ts"),ChartControlPanelRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/chart/registries/ChartControlPanelRegistrySingleton.ts"),ChartTransformPropsRegistrySingleton=__webpack_require__("./packages/superset-ui-core/src/chart/registries/ChartTransformPropsRegistrySingleton.ts");class ChartDataProvider extends react.PureComponent{constructor(props){super(props),this.chartClient=void 0,this.handleFetchData=()=>{const{loadDatasource,formDataRequestOptions,datasourceRequestOptions,queryRequestOptions}=this.props;this.setState({status:"loading"},(()=>{try{this.chartClient.loadFormData(this.extractSliceIdAndFormData(),formDataRequestOptions).then((formData=>Promise.all([loadDatasource?this.chartClient.loadDatasource(formData.datasource,datasourceRequestOptions):Promise.resolve(void 0),this.chartClient.loadQueryData(formData,queryRequestOptions)]).then((_ref=>{let[datasource,queriesData]=_ref;return{datasource,formData,queriesData}})))).then(this.handleReceiveData).catch(this.handleError)}catch(error){this.handleError(error)}}))},this.handleReceiveData=payload=>{const{onLoaded}=this.props;onLoaded&&onLoaded(payload),this.setState({payload,status:"loaded"})},this.handleError=error=>{const{onError}=this.props;onError&&onError(error),this.setState({error,status:"error"})},this.state={status:"uninitialized"},this.chartClient=new ChartClient({client:props.client})}componentDidMount(){this.handleFetchData()}componentDidUpdate(prevProps){const{formData,sliceId}=this.props;formData===prevProps.formData&&sliceId===prevProps.sliceId||this.handleFetchData()}extractSliceIdAndFormData(){const{formData,sliceId}=this.props;return formData?{formData}:{sliceId}}render(){const{children}=this.props,{status,payload,error}=this.state;switch(status){case"loading":return children({loading:!0});case"loaded":return children({payload});case"error":return children({error});default:return null}}}const components_ChartDataProvider=ChartDataProvider;try{ChartDataProvider.displayName="ChartDataProvider",ChartDataProvider.__docgenInfo={description:"",displayName:"ChartDataProvider",props:{sliceId:{defaultValue:null,description:"",name:"sliceId",required:!1,type:{name:"number"}},formData:{defaultValue:null,description:"",name:"formData",required:!1,type:{name:"Partial<SqlaFormData>"}},children:{defaultValue:null,description:"Child function called with ProvidedProps",name:"children",required:!1,type:{name:"((provided: ProvidedProps) => ReactNode) & ReactNode"}},client:{defaultValue:null,description:"Superset client which is used to fetch data. It should already be configured and initialized.",name:"client",required:!1,type:{name:"SupersetClientInterface"}},loadDatasource:{defaultValue:null,description:"Will fetch and include datasource metadata for SliceIdAndOrFormData in the payload.",name:"loadDatasource",required:!1,type:{name:"boolean"}},onError:{defaultValue:null,description:"Callback when an error occurs. Enables wrapping the Provider in an ErrorBoundary.",name:"onError",required:!1,type:{name:"((error: Error) => void)"}},onLoaded:{defaultValue:null,description:"Callback when data is loaded.",name:"onLoaded",required:!1,type:{name:"((payload: Payload) => void)"}},formDataRequestOptions:{defaultValue:null,description:"Hook to override the formData request config.",name:"formDataRequestOptions",required:!1,type:{name:"Partial<RequestConfig>"}},datasourceRequestOptions:{defaultValue:null,description:"Hook to override the datasource request config.",name:"datasourceRequestOptions",required:!1,type:{name:"Partial<RequestConfig>"}},queryRequestOptions:{defaultValue:null,description:"Hook to override the queriesData request config.",name:"queryRequestOptions",required:!1,type:{name:"Partial<RequestConfig>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/superset-ui-core/src/chart/components/ChartDataProvider.tsx#ChartDataProvider"]={docgenInfo:ChartDataProvider.__docgenInfo,name:"ChartDataProvider",path:"packages/superset-ui-core/src/chart/components/ChartDataProvider.tsx#ChartDataProvider"})}catch(__react_docgen_typescript_loader_error){}var Base=__webpack_require__("./packages/superset-ui-core/src/chart/types/Base.ts");const TransformFunction={},types_QueryResponse={};function checkNumber(input){return(0,isDefined.Z)(input)&&"number"==typeof input}class ChartFrame extends react.PureComponent{render(){const{contentWidth,contentHeight,width,height,renderContent}=this.props,overflowX=checkNumber(contentWidth)&&contentWidth>width,overflowY=checkNumber(contentHeight)&&contentHeight>height;return overflowX||overflowY?(0,emotion_react_browser_esm.tZ)("div",{style:{height,overflowX:overflowX?"auto":"hidden",overflowY:overflowY?"auto":"hidden",width}},renderContent({height:Math.max(null!=contentHeight?contentHeight:0,height),width:Math.max(null!=contentWidth?contentWidth:0,width)})):renderContent({height,width})}}ChartFrame.defaultProps={renderContent(){}};try{ChartFrame.displayName="ChartFrame",ChartFrame.__docgenInfo={description:"",displayName:"ChartFrame",props:{contentWidth:{defaultValue:null,description:"",name:"contentWidth",required:!1,type:{name:"number"}},contentHeight:{defaultValue:null,description:"",name:"contentHeight",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},renderContent:{defaultValue:null,description:"",name:"renderContent",required:!0,type:{name:"({ height, width, }: { height: number; width: number; }) => ReactNode"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/superset-ui-core/src/chart-composition/ChartFrame.tsx#ChartFrame"]={docgenInfo:ChartFrame.__docgenInfo,name:"ChartFrame",path:"packages/superset-ui-core/src/chart-composition/ChartFrame.tsx#ChartFrame"})}catch(__react_docgen_typescript_loader_error){}var ParentSize=__webpack_require__("./node_modules/@vx/responsive/esm/components/ParentSize.js");const LEGEND_STYLE_BASE={display:"flex",flexGrow:0,flexShrink:0,order:-1},CHART_STYLE_BASE={flexBasis:"auto",flexGrow:1,flexShrink:1,position:"relative"};class WithLegend extends react.PureComponent{getContainerDirection(){const{position}=this.props;return"left"===position?"row":"right"===position?"row-reverse":"bottom"===position?"column-reverse":"column"}getLegendJustifyContent(){const{legendJustifyContent,position}=this.props;return legendJustifyContent||("left"===position||"right"===position?"flex-start":"flex-end")}render(){const{className,debounceTime,width,height,position,renderChart,renderLegend}=this.props,isHorizontal="left"===position||"right"===position,style={display:"flex",flexDirection:this.getContainerDirection(),height,width},chartStyle={...CHART_STYLE_BASE};isHorizontal?chartStyle.width=0:chartStyle.height=0;const legendDirection=isHorizontal?"column":"row",legendStyle={...LEGEND_STYLE_BASE,flexDirection:legendDirection,justifyContent:this.getLegendJustifyContent()};return(0,emotion_react_browser_esm.tZ)("div",{className:`with-legend ${className}`,style},renderLegend&&(0,emotion_react_browser_esm.tZ)("div",{className:"legend-container",style:legendStyle},renderLegend({direction:legendDirection})),(0,emotion_react_browser_esm.tZ)("div",{className:"main-container",style:chartStyle},(0,emotion_react_browser_esm.tZ)(ParentSize.Z,{debounceTime},(parent=>parent.width>0&&parent.height>0?renderChart(parent):null))))}}WithLegend.defaultProps={className:"",height:"auto",position:"top",width:"auto"};const legend_WithLegend=WithLegend;try{WithLegend.displayName="WithLegend",WithLegend.__docgenInfo={description:"",displayName:"WithLegend",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},debounceTime:{defaultValue:null,description:"",name:"debounceTime",required:!1,type:{name:"number"}},width:{defaultValue:{value:"'auto' as number | string"},description:"",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:{value:"'auto' as number | string"},description:"",name:"height",required:!1,type:{name:"string | number"}},legendJustifyContent:{defaultValue:null,description:"",name:"legendJustifyContent",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"flex-end"'},{value:'"flex-start"'}]}},position:{defaultValue:{value:"top"},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'}]}},renderChart:{defaultValue:null,description:"",name:"renderChart",required:!0,type:{name:"(dim: { width: number; height: number; }) => ReactNode"}},renderLegend:{defaultValue:null,description:"",name:"renderLegend",required:!1,type:{name:"((params: { direction: string; }) => ReactNode)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/superset-ui-core/src/chart-composition/legend/WithLegend.tsx#WithLegend"]={docgenInfo:WithLegend.__docgenInfo,name:"WithLegend",path:"packages/superset-ui-core/src/chart-composition/legend/WithLegend.tsx#WithLegend"})}catch(__react_docgen_typescript_loader_error){}const CONTAINER_STYLE={padding:8};class TooltipFrame extends react.PureComponent{render(){const{className,children}=this.props;return(0,emotion_react_browser_esm.tZ)("div",{className,style:CONTAINER_STYLE},children)}}TooltipFrame.defaultProps={className:""};const tooltip_TooltipFrame=TooltipFrame;try{TooltipFrame.displayName="TooltipFrame",TooltipFrame.__docgenInfo={description:"",displayName:"TooltipFrame",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/superset-ui-core/src/chart-composition/tooltip/TooltipFrame.tsx#TooltipFrame"]={docgenInfo:TooltipFrame.__docgenInfo,name:"TooltipFrame",path:"packages/superset-ui-core/src/chart-composition/tooltip/TooltipFrame.tsx#TooltipFrame"})}catch(__react_docgen_typescript_loader_error){}const VALUE_CELL_STYLE={paddingLeft:8,textAlign:"right"};class TooltipTable extends react.PureComponent{render(){const{className,data}=this.props;return(0,emotion_react_browser_esm.tZ)("table",{className},(0,emotion_react_browser_esm.tZ)("tbody",null,data.map((_ref=>{let{key,keyColumn,keyStyle,valueColumn,valueStyle}=_ref;return(0,emotion_react_browser_esm.tZ)("tr",{key},(0,emotion_react_browser_esm.tZ)("td",{style:keyStyle},null!=keyColumn?keyColumn:key),(0,emotion_react_browser_esm.tZ)("td",{style:valueStyle?{...VALUE_CELL_STYLE,...valueStyle}:VALUE_CELL_STYLE},valueColumn))}))))}}TooltipTable.defaultProps={className:"",data:[]};try{TooltipTable.displayName="TooltipTable",TooltipTable.__docgenInfo={description:"",displayName:"TooltipTable",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},data:{defaultValue:{value:"[] as TooltipRowData[]"},description:"",name:"data",required:!1,type:{name:"TooltipRowData[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/superset-ui-core/src/chart-composition/tooltip/TooltipTable.tsx#TooltipTable"]={docgenInfo:TooltipTable.__docgenInfo,name:"TooltipTable",path:"packages/superset-ui-core/src/chart-composition/tooltip/TooltipTable.tsx#TooltipTable"})}catch(__react_docgen_typescript_loader_error){}var components_constants=__webpack_require__("./packages/superset-ui-core/src/components/constants.ts"),SafeMarkdown=__webpack_require__("./packages/superset-ui-core/src/components/SafeMarkdown.tsx"),math_expression=__webpack_require__("./packages/superset-ui-core/src/math-expression/index.ts");const getExtensionsRegistry=(0,makeSingleton.Z)(class ExtensionsRegistry extends models_TypedRegistry{constructor(){super(...arguments),this.name="ExtensionsRegistry"}},{});var usePrevious=__webpack_require__("./packages/superset-ui-core/src/hooks/usePrevious/usePrevious.ts");function useChangeEffect(value,callback){const previous=(0,usePrevious.D)(value);(0,react.useEffect)((()=>{value!==previous&&callback(previous,value)}),[value,previous,callback])}const useComponentDidMount=effect=>{(0,react.useEffect)(effect,[])},useComponentDidUpdate=effect=>{const isMountedRef=(0,react.useRef)(!1);(0,react.useEffect)((()=>{isMountedRef.current?effect():isMountedRef.current=!0}),[effect])};function useElementOnScreen(options){const containerRef=(0,react.useRef)(null),[isSticky,setIsSticky]=(0,react.useState)(!1),callback=entries=>{const[entry]=entries;setIsSticky(entry.intersectionRatio<1)};return(0,react.useEffect)((()=>{const observer=new IntersectionObserver(callback,options),element=containerRef.current;return element&&observer.observe(element),()=>{element&&observer.unobserve(element)}}),[containerRef,options]),[containerRef,isSticky]}const useTruncation_useChildElementTruncation=(elementRef,plusRef)=>{var _elementRef$current,_elementRef$current2;const[elementsTruncated,setElementsTruncated]=(0,react.useState)(0),[hasHiddenElements,setHasHiddenElements]=(0,react.useState)(!1),previousEffectInfoRef=(0,react.useRef)({scrollWidth:0,parentElementWidth:0,plusRefWidth:0});return(0,react.useLayoutEffect)((()=>{var _currentElement$paren;const currentElement=elementRef.current,plusRefElement=null==plusRef?void 0:plusRef.current;if(!currentElement)return;const{scrollWidth,clientWidth,childNodes}=currentElement,previousEffectInfo=previousEffectInfoRef.current,parentElementWidth=(null==(_currentElement$paren=currentElement.parentElement)?void 0:_currentElement$paren.clientWidth)||0,plusRefWidth=(null==plusRefElement?void 0:plusRefElement.offsetWidth)||0;if(previousEffectInfoRef.current={scrollWidth,parentElementWidth,plusRefWidth},previousEffectInfo.parentElementWidth!==parentElementWidth||previousEffectInfo.scrollWidth!==scrollWidth||previousEffectInfo.plusRefWidth!==plusRefWidth)if(scrollWidth>clientWidth){const truncationWidth=6,plusSize=(null==plusRefElement?void 0:plusRefElement.offsetWidth)||0,maxWidth=clientWidth-truncationWidth,elementsCount=childNodes.length;let width=0,hiddenElements=0;for(let i=0;i<elementsCount;i+=1){const itemWidth=childNodes[i].offsetWidth;maxWidth-truncationWidth-width-plusSize<=0&&(hiddenElements+=1),width+=itemWidth}elementsCount>1&&hiddenElements?(setHasHiddenElements(!0),setElementsTruncated(hiddenElements)):(setHasHiddenElements(!1),setElementsTruncated(1))}else setHasHiddenElements(!1),setElementsTruncated(0)}),[null==(_elementRef$current=elementRef.current)?void 0:_elementRef$current.offsetWidth,null==(_elementRef$current2=elementRef.current)?void 0:_elementRef$current2.clientWidth,elementRef]),[elementsTruncated,hasHiddenElements]};var useCSSTextTruncation=__webpack_require__("./packages/superset-ui-core/src/hooks/useTruncation/useCSSTextTruncation.ts"),CurrencyFormatter=__webpack_require__("./packages/superset-ui-core/src/currency-format/CurrencyFormatter.ts");const buildCustomFormatters=(metrics,savedCurrencyFormats,savedColumnFormats,d3Format,currencyFormat)=>(0,ensureIsArray.Z)(metrics).reduce(((acc,metric)=>{if((0,Metric.AG)(metric)){const actualD3Format=null!=d3Format?d3Format:savedColumnFormats[metric],actualCurrencyFormat=null!=currencyFormat&&currencyFormat.symbol?currencyFormat:savedCurrencyFormats[metric];return actualCurrencyFormat?{...acc,[metric]:new CurrencyFormatter.Z({d3Format:actualD3Format,currency:actualCurrencyFormat})}:{...acc,[metric]:(0,NumberFormatterRegistrySingleton.JB)(actualD3Format)}}return acc}),{}),getCustomFormatter=(customFormatters,metrics,key)=>{const metricsArray=(0,ensureIsArray.Z)(metrics);return 1===metricsArray.length&&(0,Metric.AG)(metricsArray[0])?customFormatters[metricsArray[0]]:key?customFormatters[key]:void 0},getValueFormatter=(metrics,savedCurrencyFormats,savedColumnFormats,d3Format,currencyFormat,key)=>{const customFormatter=getCustomFormatter(buildCustomFormatters(metrics,savedCurrencyFormats,savedColumnFormats,d3Format,currencyFormat),metrics,key);return customFormatter||(null!=currencyFormat&&currencyFormat.symbol?new CurrencyFormatter.Z({currency:currencyFormat,d3Format}):(0,NumberFormatterRegistrySingleton.JB)(d3Format))}},"./packages/superset-ui-core/src/math-expression/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>isValidExpression,f:()=>evalExpression});var math_expression_evaluator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/math-expression-evaluator/src/formula_evaluator.js"),math_expression_evaluator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(math_expression_evaluator__WEBPACK_IMPORTED_MODULE_0__);const REPLACE_OPERATORS=[[new RegExp(/==/g),"Eq"],[new RegExp(/>=/g),"Gte"],[new RegExp(/<=/g),"Lte"],[new RegExp(/>/g),"Gt"],[new RegExp(/</g),"Lt"]],TOKENS=[{type:3,token:"x",show:"x",value:"x"},{type:2,token:"&",show:"&",value:(a,b)=>a&b},{type:2,token:"|",show:"|",value:(a,b)=>a|b},{type:2,token:"and",show:"and",value:(a,b)=>a&&b},{type:2,token:"xor",show:"xor",value:(a,b)=>a^b},{type:2,token:"or",show:"or",value:(a,b)=>Number(a||b)},{type:2,token:"Eq",show:"Eq",value:(a,b)=>Number(a===b)},{type:2,token:"Lt",show:"Lt",value:(a,b)=>Number(a<b)},{type:2,token:"Lte",show:"Lte",value:(a,b)=>Number(a<=b)},{type:2,token:"Gt",show:"Gt",value:(a,b)=>Number(a>b)},{type:2,token:"Gte",show:"Gte",value:(a,b)=>Number(a>=b)}];function evalExpression(expression,value){var _subExpressions$;let parsedExpression=expression;REPLACE_OPERATORS.forEach((_ref=>{let[key,value]=_ref;parsedExpression=parsedExpression.replace(key,value)}));const subExpressions=String(parsedExpression).split("=");return parsedExpression=null!=(_subExpressions$=subExpressions[1])?_subExpressions$:subExpressions[0],Number(math_expression_evaluator__WEBPACK_IMPORTED_MODULE_0___default().eval(parsedExpression,TOKENS,{x:value}))}function isValidExpression(expression){try{evalExpression(expression,0)}catch(err){return!1}return!0}},"./packages/superset-ui-core/src/time-format/formatters/finestTemporalGrain.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>finestTemporalGrain});var d3_time_format__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-time-format/src/defaultLocale.js"),_utils_d3Time__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/superset-ui-core/src/time-format/utils/d3Time.ts"),_TimeFormatter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/superset-ui-core/src/time-format/TimeFormatter.ts");function finestTemporalGrain(values,useLocalTime){void 0===useLocalTime&&(useLocalTime=!1);const format=useLocalTime?d3_time_format__WEBPACK_IMPORTED_MODULE_0__.i$:d3_time_format__WEBPACK_IMPORTED_MODULE_0__.g0,formatMillisecond=format("%Y-%m-%d %H:%M:%S.%L"),formatSecond=format("%Y-%m-%d %H:%M:%S"),formatMinute=format("%Y-%m-%d %H:%M"),formatHour=format("%Y-%m-%d %H:%M"),formatDay=format("%Y-%m-%d"),formatMonth=format("%Y-%m-%d"),formatYear=format("%Y"),{hasMillisecond,hasSecond,hasMinute,hasHour,isNotFirstDayOfMonth,isNotFirstMonth}=useLocalTime?_utils_d3Time__WEBPACK_IMPORTED_MODULE_1__.Z:_utils_d3Time__WEBPACK_IMPORTED_MODULE_1__.b;let formatFunc=formatYear;return values.forEach((value=>{formatFunc===formatYear&&isNotFirstMonth(value)&&(formatFunc=formatMonth),formatFunc===formatMonth&&isNotFirstDayOfMonth(value)&&(formatFunc=formatDay),formatFunc===formatDay&&hasHour(value)&&(formatFunc=formatHour),formatFunc===formatHour&&hasMinute(value)&&(formatFunc=formatMinute),formatFunc===formatMinute&&hasSecond(value)&&(formatFunc=formatSecond),formatFunc===formatSecond&&hasMillisecond(value)&&(formatFunc=formatMillisecond)})),new _TimeFormatter__WEBPACK_IMPORTED_MODULE_2__.Z({description:"Use the finest grain in an array of dates to format all dates in the array",formatFunc,id:"finest_temporal_grain",label:"Format temporal columns with the finest grain",useLocalTime})}},"?d4c0":()=>{}}]);